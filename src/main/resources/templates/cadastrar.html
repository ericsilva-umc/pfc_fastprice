<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Fast Price - Cadastro</title>
        <link rel="icon" type="image/png" href="/imgs/cart.png">
        <link rel="stylesheet" href="/css/style_register.css">
    </head>

    <body>
        <div class="container">
            <div class="logo-container">
                <a th:href="@{/}">
                    <img src="/imgs/logo.png" alt="Fast Price Logo" class="logo">
                </a>
            </div>
            <div class="register-card">
                <!--Formulário de cadastro com validação de senha e mensagem de erro quando e-mail já está cadastrado-->
                <form th:action="@{/usuario/cadastrar}" method="POST" oninput="repetir.setCustomValidity(repetir.value != senha.value ? 'As senhas não conferem.' : '')">
                    <h1>Cadastre uma conta</h1>
                    <input type="text" name="nome" id="campoNome" class="input-field" placeholder="Digite um nome para conta" required>
                    <input type="email" name="email" id="campoEmail" class="input-field" placeholder="Digite um e-mail" required>
                    <input type="password" name="senha" id="campoSenha" class="input-field" placeholder="Digite uma senha" required>
                    <input type="password" name="repetir" id="campoSenhaRepetir" class="input-field" placeholder="Repita a senha">

                    <!--Exibe uma mensagem quando o e-mail informado já está cadastrado-->
                    <div th:if="${erro}" class="error">
                        <p th:text="${erro}"></p>
                    </div>

                    <!--Ao clicar exibe a modal com os termos de uso-->
                    <div class="terms-text">
                        Ao se cadastrar, você concorda com nossos
                        <a class="terms-link" id="termsLink">Termos de Uso</a>.
                    </div>

                    <input type="submit" value="Cadastrar" class="btn btn-primary">
                </form>
                
                <div class="divider"></div>
                
                <p class="login-text">Já possui uma conta?</p>
                <button onclick="window.location.href='/login'" class="btn btn-secondary">Entrar</button>
            </div>
        </div>
        <!--Modal com os termos de uso-->
        <div id="termsModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Termos de Uso</h5>
                    <span class="close-button">&times;</span>
                </div>
                <div class="modal-body">
                    <h4>Termos e Condições de Uso - FastPrice</h4>
                    <p>Última atualização: Abril 2025</p>

                    <h5>1. Aceitação dos Termos</h5>
                    <p>Ao acessar e utilizar o serviço FastPrice, você concorda em cumprir e estar vinculado aos seguintes
                        termos e condições de uso. Se você não concordar com qualquer parte destes termos, não poderá
                        acessar ou utilizar nosso serviço.</p>

                    <h5>2. Descrição do Serviço</h5>
                    <p>O FastPrice é uma plataforma que permite aos usuários comparar preços de produtos e serviços. Nosso
                        objetivo é fornecer informações precisas e atualizadas, mas não garantimos a exatidão, integridade
                        ou atualidade das informações disponibilizadas.</p>

                    <h5>3. Cadastro e Conta</h5>
                    <p>Para utilizar determinadas funcionalidades do FastPrice, você precisará criar uma conta. Você é
                        responsável por manter a confidencialidade de suas credenciais de login e por todas as atividades
                        que ocorrerem em sua conta.</p>

                    <h5>4. Privacidade</h5>
                    <p>Nossa Política de Privacidade descreve como coletamos, usamos e compartilhamos suas informações
                        pessoais. Ao utilizar nosso serviço, você concorda com nossa coleta e uso de informações de acordo
                        com nossa Política de Privacidade.</p>

                    <h5>5. Propriedade Intelectual</h5>
                    <p>Todo o conteúdo, recursos e funcionalidades disponíveis no FastPrice são de propriedade da empresa ou
                        de seus licenciadores e são protegidos por leis de direitos autorais, marcas registradas e outras
                        leis de propriedade intelectual.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary modal-close">Fechar</button>
                </div>
            </div>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                // Referências aos elementos

                const termsLink = document.getElementById('termsLink');
                const modal = document.getElementById('termsModal');
                const closeButton = document.querySelector('.close-button');
                const modalCloseButton = document.querySelector('.modal-close');

                // Funções do modal
                function openModal() {
                    modal.style.display = 'block';
                    document.body.style.overflow = 'hidden'; // Impede rolagem do body
                }

                function closeModal() {
                    modal.style.display = 'none';
                    document.body.style.overflow = 'auto'; // Restaura rolagem do body
                }

                // Event listeners para o modal
                termsLink.addEventListener('click', function (e) {
                    e.preventDefault();
                    openModal();
                });

                closeButton.addEventListener('click', closeModal);
                modalCloseButton.addEventListener('click', closeModal);


                // Fechar modal ao clicar fora dele
                window.addEventListener('click', function (e) {
                    if (e.target === modal) {
                        closeModal();
                    }
                });
            });
        </script>
    </body>

</html>